\documentclass[draftclsnofoot,onecolumn]{IEEEtran}

\usepackage{graphicx}                                        
\usepackage{amssymb}                                         
\usepackage{amsmath}                                         
\usepackage{amsthm}         


\usepackage{alltt}                                           
\usepackage{float}
\usepackage{color}
\usepackage{url}

\usepackage{balance}
\usepackage[TABBOTCAP, tight]{subfigure}
\usepackage{enumitem}
\usepackage{pstricks, pst-node}

\usepackage{geometry}


\geometry{textheight=8.5in, textwidth=6in}

%random comment

\newcommand{\cred}[1]{{\color{red}#1}}
\newcommand{\cblue}[1]{{\color{blue}#1}}

\usepackage{hyperref}
\usepackage{geometry}

\usepackage{longtable}


\newcommand{\longtableendfoot}{Please continue at the next page}

\def\name{Andrew Chase}

\date{}
\author{\name \\ 
OS II \\
Spring 2015 \\
Abstract: Describes work done to build and run a virtual kernel, as well as develop and test a simple concurrency demo.
}
\title{Project 1: Getting Acquainted}

%pull in the necessary preamble matter for pygments output
\input{pygments.tex}

%% The following metadata will show up in the PDF properties
\hypersetup{
  colorlinks = true,
  urlcolor = black,
  pdfauthor = {\name},
  pdfkeywords = {cs311 ``operating systems'' files filesystem I/O},
  pdftitle = {CS 311 Project 1: UNIX File I/O},
  pdfsubject = {CS 311 Project 1},
  pdfpagemode = UseNone
}

\begin{document}

\maketitle

\pagebreak

\tableofcontents

\pagebreak

\section{Work Log}

\begin{tabular}{ll}
  \textbf{Date} & \textbf{Work Done} \\
  Apr 7 & Build Kernel and run on os-class \\
  Apr 8 & Write Concurrency solution \\
  April 11& Write this paper
\end{tabular}

\section{Kernel Setup}

\subsection{Command List}

The following was the bash history for setting up the Kernel.

\input{bash_history.sh.tex}

\subsection{Qemu command line flags}

\begin{tabular}{ll}
  \textbf{Flag} & \textbf{Meaning} \\
  -gdb tcp::???? & Wait for gdb connection on tcp:???? before continuing \\
  -S & Freeze CPU execution on startup (use gdb to continue) \\
  -nographic & QEMU has a graphical output system. This flag disables it \\
  -kernel bzImage-qemux86.bin & Use selected bzimage as the system Kernel \\
  -drive ... & Use selected drive and input file as the virtual hard drive for the machine  \\
  -enable-kvm & Enabled hardware assisted virtualization using special kernel-level optimizations \\
  -net none & Disable networking \\
  -usb & Enable usb driver support \\
  -localtime & Sets virtual clock to the system clock; Deprecated 2009 in qemu commit 1ed2fc1 \\
  -no-reboot & When system shuts down, exit qemu instead of rebooting the virtual machine \\
  -append ... & Kernels accept command line options, use these options specifed
\end{tabular}

\section{Concurrency Exercise: Questions}

\subsection{What do you think the main point of this assignment is?}

I think the main point of the assignment is to review writing, compiling, and testing low-level code which students will be doing in this course.

\subsection{How did you personally approach the problem? Design decisions, algorithm, etc.}

I used the low-level Pipe construct, after making sure that it was thread-safe for the purposes of the assignment. The use of pipes is simple and easy for programmers to understand. The trade-off for pipes was that it only works in a thread-safe way for small message sizes and is tied to a specific operating system level api, but the advantage of a pipe are that they are very easy to understand and implement.

\subsection{How did you ensure your solution was correct? Testing details, for instance.}

I ran the solution and inserted system print log statements to make sure the system was behaving as desired.

\subsection{What did you learn?}

That pipes can be used for concurrency, that newer Intel chips have randomization instructions, and a lot about the cmake build tool.

\section{Concurrency Exercise: File Tree}

\begin{verbatim}
.
| - CMakeLists.txt
| - get_random.c
| - get_random.h
| - main.c
| - vendor
    | - drng
    |   | - LICENSE
    |   | - README
    |   | - config.h
    |   | - cpuid.c
    |   | - cpuid.h
    |   | - drng.c
    |   | - drng.h
    | - mt19937ar.c
    | - mt19937ar.h
    | - not_using_drng
    |   | - using_drng.h
    | - test_drng
    |   | - test.c
    | - test_drng_bin
    |   | - CMakeFiles
    |       | - CMakeTmp
    | - using_drng
        | - using_drng.h
        

8 directories, 16 files
\end{verbatim}

\section{Concurrency Exercise: Git Log}

%% This file was generated by the script latex-git-log
\begin{tabular}{lp{12cm}}
  \label{tabular:legend:git-log}
  \textbf{acronym} & \textbf{meaning} \\
  V & \texttt{version} \\
  tag & \texttt{git tag} \\
  MF & Number of \texttt{modified files}. \\
  AL & Number of \texttt{added lines}. \\
  DL & Number of \texttt{deleted lines}. \\
\end{tabular}

\bigskip

\iflanguage{ngerman}{\shorthandoff{"}}{}
\begin{longtable}{|rlllrrr|}
\hline \multicolumn{1}{|c}{\textbf{V}} & \multicolumn{1}{c}{\textbf{tag}}
& \multicolumn{1}{c}{\textbf{date}}
& \multicolumn{1}{c}{\textbf{commit message}} & \multicolumn{1}{c}{\textbf{MF}}
& \multicolumn{1}{c}{\textbf{AL}} & \multicolumn{1}{c|}{\textbf{DL}} \\ \hline
\endhead

\hline \multicolumn{7}{|r|}{\longtableendfoot} \\ \hline
\endfoot

\hline% \hline
\endlastfoot

\hline 1 &  & 2016-04-07 & init & 2 & 15 & 0 \\
\hline 2 &  & 2016-04-07 & Add pthreads from pthreads example & 3 & 42 & 11 \\
\hline 3 &  & 2016-04-07 & Stub consumers/producers functions and add pipe. & 1 & 47 & 14 \\
\hline 4 &  & 2016-04-07 & Add random vendor files and interface & 12 & 1112 & 2 \\
\hline 5 &  & 2016-04-07 & Implement randomness into producer & 1 & 18 & 5 \\
\hline 6 &  & 2016-04-08 & Use Try\_Compile to decide random at compile time & 6 & 50 & 14 \\
\end{longtable}


\section{Concurrency Exercise: Code Listings}

\subsection{main.c}

\input{main.c.tex}

\subsection{get\_random.c}

\input{get_random.c.tex}

\subsection{mt19937ar.c}

\input{__mt19937ar.c.tex}

\end{document}
